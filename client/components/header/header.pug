include ../user-avatar/user-avatar

mixin header  (user_role, notification_count, user_name, user_img)
  script.
    if (!Object.prototype.hasOwnProperty.call(localStorage, 'id')) {
    window.location.href = 'auth.html';
    }
  header.header
    .container
      .header__left-colm
        a.header__logo-link(href='index.html')
          img.header__icon(src='../../../public/img/icons/logo.svg' alt='Логотип сайта')
        nav.header__nav
          .menu-burger 
            span.menu-burger__button        
          ul.menu
            if user_role == 'admin'
              -
                var menu = {
                  index: 'Главная',
                  tasks: 'Задача',
                  users: 'Пользователи'
                }
            else 
              -
                var menu = {
                  index: 'Главная',
                  tasks: 'Задача'
                }

            each value, key in menu 
              li.menu__item
                a.menu__link(href= key +'.html')= value

      .header__right-colm
    
        a(class='notification' href= 'notifications.html')
          svg.notification__bell-icon
            use(xlink:href='../../../public/img/icons/header-sprite.svg#bell')
          
          if notification_count < 1
            -var classes=['notification__new-area', 'label']
          else 
            -var classes=['notification__new-area', 'label', 'notification_new']
  
          div(class=classes)
            span.notification__new-message= notification_count
        
        .user
          span.user__name
          button.user__button
            +avatar('small')
            svg.user__open-menu
              use(xlink:href='../../../public/img/icons/header-sprite.svg#menu')
          .user-menu
            ul.user-menu__list
              li.user-menu__item
                a.user-menu__link(href='#') Профиль
              li.user-menu__item
                a.user-menu__link(href='#') Выход
